{% extends "layouts/default.html" %}
{% set title = "Chat" %}

{% block content %}
  <div class="govuk-grid-row">
    <div class="govuk-grid-column-full">
      <h2 class="govuk-heading-xl">{{ title }}</h2>
      <div id="chat-output" class="chat-output govuk-body">
        <div class="message message--assistant">
          <p>Hello. How can I help?</p>
        </div>
        {% if data.chats[chatId] and data.chats[chatId].messages | length %}
          {% for message in data.chats[chatId].messages %}
            <div class="message message--user">{{ message.requestHtml | safe }}</div>
            <div class="message message--assistant">{{ message.messageHtml | safe }}</div>
          {% endfor %}
        {% endif %}
      </div>

    <div class="govuk-grid-row">
      <div class="govuk-grid-column-two-thirds">
        <form
          method="post"
          data-endpoint="/chat/{{ type }}/{{ chatId }}/stream"
          class="app-chat-form"
        >
        {{ govukTextarea({
          id: "chat",
          name: "chat",
          label: {
            text: "Message",
            classes: "govuk-label--m"
          },
          rows: 4
        }) }}

        {{ govukButton({
          text: "Send message",
          classes: "govuk-visually-hidden"
        }) }}
      </form>
      </div>
    </div>
    </div>
  </div>
{% endblock %}
